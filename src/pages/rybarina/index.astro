---
import { getCollection } from 'astro:content';
import Base from '../../layouts/Base.astro';
import PostCard from '../../components/PostCard.astro';

const items = (await getCollection('posts', ({ data }) => !data.draft && data.category === 'rybarina')).sort(
  (a, b) => b.data.publishDate.getTime() - a.data.publishDate.getTime()
);
---

<Base title="Rybařina | drobky.cz">
  <section class="space-y-4 pb-6">
    <h1 class="font-heading text-6xl">Rybařina</h1>
    <p class="max-w-prose text-xl text-muted">Výpis článků z rybařiny. Obsah je spravovaný přes Decap CMS.</p>
  </section>

  {
    items.length === 0 ? (
      <p class="rounded-card border border-border bg-card p-5 text-lg text-muted">Zatím tu nejsou žádné články.</p>
    ) : (
      <section class="grid gap-5 md:grid-cols-2 lg:grid-cols-3">
        {items.map((post) => (
          <PostCard
            category={post.data.category}
            title={post.data.title}
            excerpt={post.data.excerpt}
            date={post.data.publishDate}
            readTime={post.data.readTime}
            image={post.data.coverImage}
            href={`/clanky/${post.slug}`}
          />
        ))}
      </section>
    )
  }
</Base>
